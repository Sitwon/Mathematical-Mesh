<?xml version='1.0'?>
<html>
<head>
<title>Mathematical Mesh CSP</title>
</head>
<body>
<h1>Mathematical Mesh: Client-Service Protocol</h1>
<h1 class="abstract" id="Abstract">Abstract</h1>
<P class="abstract">The Mathematical Mesh ?The Mesh? is an end-to-end secure infrastructure that facilitates the exchange of configuration and credential data between multiple user devices. The core protocols of the Mesh are described with examples of common use cases and reference data.</P>
<h1 id="Section_1">Introduction</h1>
<h1 id="Section_2">Definitions</h1>
<h2 id="Section_2_1">Requirements Language</h2>
<p id=""/>
<p id="">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119 [RFC2119].</p>
<h1 id="Section_3">Use Scenarios</h1>
<h2 id="Section_3_1">Service Discovery</h2>
<h2 id="Section_3_2">Create Account</h2>
<h2 id="Section_3_3">Connect Device</h2>
<h2 id="Section_3_4">Add Application</h2>
<h2 id="Section_3_5">Update Application</h2>
<h2 id="Section_3_6">Delete Device</h2>
<h2 id="Section_3_7">Master Profile Recovery</h2>
<h2 id="Section_3_8">Application Profile Recovery</h2>
<h1 id="Section_4">Mesh Client-Service Protocol Messages</h1>
<h1 id="Section_5">MeshProtocol </h1>
<h2 id="Section_5_1">MeshProtocol Transactions </h2>
<h3 id="Section_5_1_1">Transaction: Hello </h3>
<ul>
<ul>
<li>Request: HelloRequest </li>
<li>Response: HelloResponse </li>
</ul>
</ul>
<p id="">Report service and version information.  </p>
<p id="">The Hello transaction provides a means of determining which protocol versions, message encodings and transport protocols are supported by  the service. </p>
<h3 id="Section_5_1_2">Transaction: ValidateAccount </h3>
<ul>
<ul>
<li>Request: ValidateRequest </li>
<li>Response: ValidateResponse </li>
</ul>
</ul>
<p id="">Request validation of a proposed name for a new account. </p>
<p id="">For validation of a user's account name during profile creation. </p>
<h3 id="Section_5_1_3">Transaction: CreateAccount </h3>
<ul>
<ul>
<li>Request: CreateRequest </li>
<li>Response: CreateResponse </li>
</ul>
</ul>
<p id="">Request creation of a new mesh account. </p>
<p id="">Unlike a profile, a mesh account is specific to a particular  Mesh portal. A mesh account must be created and accepted before a profile can be published. </p>
<h3 id="Section_5_1_4">Transaction: Publish </h3>
<ul>
<ul>
<li>Request: PublishRequest </li>
<li>Response: PublishResponse </li>
</ul>
</ul>
<p id="">Publish a profile or key escrow entry to the mesh. </p>
<h3 id="Section_5_1_5">Transaction: Get </h3>
<ul>
<ul>
<li>Request: GetRequest </li>
<li>Response: GetResponse </li>
</ul>
</ul>
<p id="">Search for data in the mesh that matches a set of keys. </p>
<h3 id="Section_5_1_6">Transaction: GetRecords </h3>
<ul>
<ul>
<li>Request: GetRequest </li>
<li>Response: GetRecordsResponse </li>
</ul>
</ul>
<h3 id="Section_5_1_7">Transaction: Transfer </h3>
<ul>
<ul>
<li>Request: TransferRequest </li>
<li>Response: TransferResponse </li>
</ul>
</ul>
<p id="">Request a bulk transfer of the log between the specified transaction identifiers. Requires appropriate authorization </p>
<p id="">[Not currently implemented] </p>
<h3 id="Section_5_1_8">Transaction: Status </h3>
<ul>
<ul>
<li>Request: StatusRequest </li>
<li>Response: StatusResponse </li>
</ul>
</ul>
<p id="">Request the current status of the mesh as seen by the portal to which it is directed. </p>
<p id="">The response to the status request contains the last signed checkpoint and proof chains for each of the peer portals that have been checkpointed. </p>
<p id="">[Not currently implemented] </p>
<h3 id="Section_5_1_9">Transaction: ConnectStart </h3>
<ul>
<ul>
<li>Request: ConnectStartRequest </li>
<li>Response: ConnectStartResponse </li>
</ul>
</ul>
<p id="">Request connection of a new device to a mesh profile </p>
<h3 id="Section_5_1_10">Transaction: ConnectStatus </h3>
<ul>
<ul>
<li>Request: ConnectStatusRequest </li>
<li>Response: ConnectStatusResponse </li>
</ul>
</ul>
<p id="">Request status of pending connection request of a new device  to a mesh profile </p>
<h3 id="Section_5_1_11">Transaction: ConnectPending </h3>
<ul>
<ul>
<li>Request: ConnectPendingRequest </li>
<li>Response: ConnectPendingResponse </li>
</ul>
</ul>
<p id="">Request status of pending connection request of a new device  to a mesh profile </p>
<h3 id="Section_5_1_12">Transaction: ConnectComplete </h3>
<ul>
<ul>
<li>Request: ConnectCompleteRequest </li>
<li>Response: ConnectCompleteResponse </li>
</ul>
</ul>
<p id="">Request status of pending connection request of a new device  to a mesh profile </p>
<h2 id="Section_5_2">MeshProtocol Messages </h2>
<h3 id="Section_5_2_1">Message: MeshRequest </h3>
<p id="">[None] </p>
<h3 id="Section_5_2_2">Message: MeshResponse </h3>
<p id="">[None] </p>
<h3 id="Section_5_2_3">Message: HelloRequest </h3>
<p id="">[None] </p>
<h3 id="Section_5_2_4">Message: HelloResponse </h3>
<dl>
<dl>
<dt>Version : </dt>
<dd>Version [0..1]  </dd>
</dl>
</dl>
<p id="">Enumerates the protocol versions supported </p>
<dl>
<dl>
<dt>Alternates : </dt>
<dd>Version [0..Many]  </dd>
</dl>
</dl>
<p id="">Enumerates alternate protocol version(s) supported </p>
<h3 id="Section_5_2_5">Message: ValidateRequest </h3>
<dl>
<dl>
<dt>Account : </dt>
<dd>String [0..1]  </dd>
</dl>
</dl>
<p id="">Account name requested </p>
<dl>
<dl>
<dt>Reserve : </dt>
<dd>Boolean [0..1]  </dd>
</dl>
</dl>
<p id="">If true, request a reservation for the specified account name. Note that the service is not obliged to honor reservation  requests. </p>
<dl>
<dl>
<dt>Language : </dt>
<dd>String [0..Many]  </dd>
</dl>
</dl>
<p id="">List of ISO language codes in order of preference. For creating explanatory text. </p>
<h3 id="Section_5_2_6">Message: ValidateResponse </h3>
<dl>
<dl>
<dt>Valid : </dt>
<dd>Boolean [0..1]  </dd>
</dl>
</dl>
<p id="">[TBS] </p>
<dl>
<dl>
<dt>Minimum : </dt>
<dd>Integer [0..1]  </dd>
</dl>
</dl>
<p id="">[TBS] </p>
<dl>
<dl>
<dt>InvalidCharacters : </dt>
<dd>String [0..1]  </dd>
</dl>
</dl>
<p id="">A list of characters from the requested account that the service  does not accept in account names. </p>
<dl>
<dl>
<dt>Reason : </dt>
<dd>String [0..1]  </dd>
</dl>
</dl>
<p id="">Text explaining the reason an account name was rejected. </p>
<h3 id="Section_5_2_7">Message: CreateRequest </h3>
<dl>
<dl>
<dt>Account : </dt>
<dd>String [0..1]  </dd>
</dl>
</dl>
<p id="">Account name requested </p>
<h3 id="Section_5_2_8">Message: CreateResponse </h3>
<p id="">[None] </p>
<h3 id="Section_5_2_9">Message: PublishRequest </h3>
<p id="">[None] </p>
<h3 id="Section_5_2_10">Message: PublishResponse </h3>
<p id="">[None] </p>
<h3 id="Section_5_2_11">Message: GetRequest </h3>
<dl>
<dl>
<dt>Identifier : </dt>
<dd>String [0..1]  </dd>
</dl>
</dl>
<p id="">Lookup by profile ID </p>
<dl>
<dl>
<dt>Account : </dt>
<dd>String [0..1]  </dd>
</dl>
</dl>
<p id="">Lookup by Account ID </p>
<dl>
<dl>
<dt>KeyValues : </dt>
<dd>KeyValue [0..Many]  </dd>
</dl>
</dl>
<p id="">List of KeyValue pairs specifying the conditions to be met </p>
<dl>
<dl>
<dt>NotBefore : </dt>
<dd>DateTime [0..1]  </dd>
</dl>
</dl>
<p id="">[TBS] </p>
<dl>
<dl>
<dt>NotOnOrAfter : </dt>
<dd>DateTime [0..1]  </dd>
</dl>
</dl>
<p id="">[TBS] </p>
<dl>
<dl>
<dt>Multiple : </dt>
<dd>Boolean [0..1]  </dd>
</dl>
</dl>
<p id="">If true return multiple responses if available </p>
<h3 id="Section_5_2_12">Message: GetResponse </h3>
<p id="">[None] </p>
<h3 id="Section_5_2_13">Message: GetRecordsResponse </h3>
<dl>
<dl>
<dt>DataItems : </dt>
<dd>DataItem [0..Many]  </dd>
</dl>
</dl>
<p id="">List of mesh data records matching the request. </p>
<h3 id="Section_5_2_14">Message: TransferRequest </h3>
<dl>
<dl>
<dt>NotBefore : </dt>
<dd>DateTime [0..1]  </dd>
<dt>Until : </dt>
<dd>DateTime [0..1]  </dd>
<dt>After : </dt>
<dd>String [0..1]  </dd>
<dt>MaxEntries : </dt>
<dd>Integer [0..1]  </dd>
<dt>MaxBytes : </dt>
<dd>Integer [0..1]  </dd>
</dl>
</dl>
<h3 id="Section_5_2_15">Message: TransferResponse </h3>
<p id="">[None] </p>
<h3 id="Section_5_2_16">Message: StatusRequest </h3>
<p id="">[None] </p>
<h3 id="Section_5_2_17">Message: StatusResponse </h3>
<dl>
<dl>
<dt>LastWriteTime : </dt>
<dd>DateTime [0..1]  </dd>
</dl>
</dl>
<p id="">Time that the last write update was made to the Mesh </p>
<dl>
<dl>
<dt>LastCheckpointTime : </dt>
<dd>DateTime [0..1]  </dd>
</dl>
</dl>
<p id="">Time that the last Mesh checkpoint was calculated. </p>
<dl>
<dl>
<dt>NextCheckpointTime : </dt>
<dd>DateTime [0..1]  </dd>
</dl>
</dl>
<p id="">Time at which the next Mesh checkpoint should be calculated. </p>
<dl>
<dl>
<dt>CheckpointValue : </dt>
<dd>String [0..1]  </dd>
</dl>
</dl>
<p id="">Last checkpoint value. </p>
<h3 id="Section_5_2_18">Message: ConnectStartRequest </h3>
<dl>
<dl>
<dt>SignedRequest : </dt>
<dd>SignedConnectionRequest [0..1]  </dd>
<dt>AccountID : </dt>
<dd>String [0..1]  </dd>
</dl>
</dl>
<h3 id="Section_5_2_19">Message: ConnectStartResponse </h3>
<dl>
<dl>
<dt>SignedConnectionResult : </dt>
<dd>String [0..1]  </dd>
</dl>
</dl>
<h3 id="Section_5_2_20">Message: ConnectStatusRequest </h3>
<dl>
<dl>
<dt>AccountID : </dt>
<dd>String [0..1]  </dd>
<dt>DeviceID : </dt>
<dd>String [0..1]  </dd>
</dl>
</dl>
<h3 id="Section_5_2_21">Message: ConnectStatusResponse </h3>
<dl>
<dl>
<dt>Result : </dt>
<dd>SignedConnectionResult [0..1]  </dd>
</dl>
</dl>
<h3 id="Section_5_2_22">Message: ConnectPendingRequest </h3>
<dl>
<dl>
<dt>AccountID : </dt>
<dd>String [0..1]  </dd>
</dl>
</dl>
<h3 id="Section_5_2_23">Message: ConnectPendingResponse </h3>
<dl>
<dl>
<dt>Pending : </dt>
<dd>SignedConnectionRequest [0..Many]  </dd>
</dl>
</dl>
<h3 id="Section_5_2_24">Message: ConnectCompleteRequest </h3>
<dl>
<dl>
<dt>Result : </dt>
<dd>SignedConnectionResult [0..1]  </dd>
<dt>AccountID : </dt>
<dd>String [0..1]  </dd>
</dl>
</dl>
<h3 id="Section_5_2_25">Message: ConnectCompleteResponse </h3>
<p id="">[None] </p>
<h2 id="Section_5_3">MeshProtocol Structures </h2>
<h3 id="Section_5_3_1">Structure: Version </h3>
<dl>
<dl>
<dt>Major : </dt>
<dd>Integer [0..1]  </dd>
</dl>
</dl>
<p id="">Major version number of the service protocol. A higher </p>
<dl>
<dl>
<dt>Minor : </dt>
<dd>Integer [0..1]  </dd>
</dl>
</dl>
<p id="">Minor version number of the service protocol. </p>
<dl>
<dl>
<dt>Encodings : </dt>
<dd>Encoding [0..Many]  </dd>
</dl>
</dl>
<p id="">Enumerates alternative encodings (e.g. ASN.1, XML, JSON-B) if supported by the server </p>
<dl>
<dl>
<dt>URI : </dt>
<dd>String [0..Many]  </dd>
</dl>
</dl>
<p id="">The preferred URI for this service. This MAY be used to effect a redirect in the case that a service moves. </p>
<h3 id="Section_5_3_2">Structure: Encoding </h3>
<dl>
<dl>
<dt>ID : </dt>
<dd>String [0..Many]  </dd>
</dl>
</dl>
<p id="">The IANA encoding name </p>
<dl>
<dl>
<dt>Dictionary : </dt>
<dd>String [0..Many]  </dd>
</dl>
</dl>
<p id="">For encodings that employ a named dictionary for tag or data compression, the name of the dictionary as defined by that  encoding scheme.  </p>
<h3 id="Section_5_3_3">Structure: KeyValue </h3>
<dl>
<dl>
<dt>Key : </dt>
<dd>String [0..1]  </dd>
</dl>
</dl>
<p id="">[TBS] </p>
<dl>
<dl>
<dt>Value : </dt>
<dd>String [0..1]  </dd>
</dl>
</dl>
<p id="">[TBS] </p>
<h1 id="Section_6">Mesh Client-Service Protocol State Transitions</h1>
<h1 id="Section_7">Security Considerations</h1>
<h2 id="Section_7_1">Service Confidentiality</h2>
<h1 id="Section_8">IANA Considerations</h1>
<p id="">IANA has registered the following protocol identifier for use with this protocol: MMM</p>
<h1 id="Section_9">Appendix A: Portal Schema.</h1>
<h1>References</h1>
<h2 class="references" id="NormativeReferences">Normative References</h2>
</body>
</html>
