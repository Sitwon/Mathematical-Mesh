<?xml version='1.0'?>
<html>
<head>
<title>Mathematical Mesh Platform Configuration</title>
</head>
<body>
<h1>Mathematical Mesh: Platform Configuration</h1>
<h1 class="abstract" id="Abstract">Abstract</h1>
<P class="abstract">The Mathematical Mesh 'The Mesh' is an end-to-end secure infrastructure that facilitates the exchange of configuration and credential data between multiple user devices. This document describes how Mesh profiles are stored for application access on Windows, Linux and OSX platforms.</P>
<h1 id="Section_1">Definitions</h1>
<h2 id="Section_1_1">Requirements Language</h2>
<p id=""/>
<p id="">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119 [RFC2119].</p>
<h1 id="Section_2">Configuration Scope</h1>
<h1 id="Section_3">Windows Platform Configuration</h1>
<p id="">The Windows Configuration is stored in a combination of Windows Key Store entries, registry entries and data files.</p>
<p id="">The profiles that are available to a user are specified as Windows registry keys.</p>
<p id="">Cached and archival copies of profiles are stored on the local machine as data files with file names and locations specified in the Windows registry.</p>
<p id="">Cryptographic keys are stored in a Windows key store.</p>
<p id="">To locate a device, application or personal profile, an application:</p>
<p id="">Searches for a Windows registry entry that matches the relevant criteria.</p>
<p id="">Retrieves the profile data from either a local cached copy or the corresponding portal.</p>
<p id="">Accesses the corresponding private keys through the Windows key store.</p>
<p id="">The Windows Key store is the natural storage location for cryptographic keys on the Windows platform as keys are at minimum protected by the operating system access control mechanism. The Windows key store also permits the use of cryptographic hardware devices.</p>
<h2 id="Section_3_1">Registry Key Entries</h2>
<p id="">All keys used by the Mathematical Mesh are stored in the following Windows registry location:</p>
<p id="">HKEY_CURRENT_USER\SOFTWARE\CryptoMesh</p>
<p id="">This location has the following sub keys:</p>
<dl>
<dl>
<dt>PersonalProfiles</dt>
<dd>(Default) -&gt; UDF fingerprint of the default personal profile</dd>
<dt>PersonalProfiles\&lt;UDF&gt;</dt>
<dd>(Default) -&gt; File location for the profile.</dd>
<dd>Archive -&gt; File location for the profile archive.</dd>
<dd>Portals -&gt; Multistring containing portal accounts to which the profile is registered. The default portal is first.</dd>
<dt>ApplicationProfiles</dt>
<dd>Web -&gt; UDF fingerprint of default Web Application profile</dd>
<dd>SSH -&gt; UDF fingerprint of default SSH Application profile</dd>
<dd>Network -&gt; UDF fingerprint of default network Application profile</dd>
<dd>Mail -&gt; UDF fingerprint of default Mail Application profile</dd>
<dd>UDF Fingerprint of profile -&gt; File location of profile  </dd>
<dt>DeviceProfiles</dt>
<dd>(Default) -&gt; UDF fingerprint of default device profile</dd>
<dd>UDF Fingerprint of Device profile -&gt; File location of device profile</dd>
</dl>
</dl>
<h2 id="Section_3_2">Data File Locations</h2>
<p id="">ApplicationData \CryptoMesh\</p>
<h2 id="Section_3_3">Key Store Entries</h2>
<p id="">&lt;&gt;</p>
<h2 id="Section_3_4">Profiles</h2>
<h3 id="Section_3_4_1">Locating a personal profile</h3>
<p id="">To locate the default personal profile, an application:</p>
<p id="">Retrieves the key PersonalProfiles\(Default) to get &lt;UDF&gt;</p>
<p id="">Locates the profile with identifier &lt;UDF&gt;</p>
<p id="">To locate the personal profile with identifier UDF, an application:</p>
<p id="">Retrieves the key PersonalProfiles\&lt;UDF&gt;</p>
<p id="">Retrieves the latest version of the profile from the location specified in PersonalProfiles\&lt;UDF&gt;\(Default)</p>
<p id="">If necessary, the profile is refreshed from one of the accounts specified in PersonalProfiles\&lt;UDF&gt;\Portal</p>
<p id="">In case of an inconsistency being detected, the application MAY use the archived copies of the profile to resynchronize.</p>
<p id="">Note that having been connected to a profile at some time in the past does not guarantee that a device currently has access, even if the device in question was an administration device for the profile.</p>
<h3 id="Section_3_4_2">Locating a device profile</h3>
<p id="">To locate a device profile an application </p>
<h3 id="Section_3_4_3">Locating an application profile</h3>
<p id="">To locate a device profile an application </p>
<p id=""/>
<h1 id="Section_4">OSX Platform Configuration</h1>
<p id="">The OSX configuration is stored in a combination of a master configuration file, profile data files and the OSX KeyChain</p>
<p id="">The profiles that are available to a user are stored in a JSON configuration file </p>
<p id="">Cached and archival copies of profiles are stored on the local machine as data files with file names and locations specified in the JSON configuration file</p>
<p id="">Cryptographic keys are stored in the OSX Key Chain.</p>
<p id="">File locations</p>
<p id="">The JSON Configuration file is stored in ~/.cryptomesh/profiles.json</p>
<p id="">Profile data files are stored in a directory ~/.cryptomesh/&lt;UDF&gt;</p>
<p id="">The latest copy of the profile is stored in &lt;UDF&gt;.mmm</p>
<p id="">An archive containing all the stored profiles is stored in &lt;UDF&gt;.all.mmm</p>
<p id=""/>
<h2 id="Section_4_1">Key Storage</h2>
<p id="">Private keys are stored in the OSX Key Manager in some fashion to be decided later.</p>
<h1 id="Section_5">Linux Platform Configuration</h1>
<p id="">The Linux configuration is stored in a combination of a master configuration file, profile data files and private key files.</p>
<p id="">The file layout of the Linux configuration and data files is identical to that of OSX.</p>
<h2 id="Section_5_1">Key Storage</h2>
<p id="">Private Keys are stored in the locations that the Linux applications that are to use them expect to find them.</p>
<h1 id="Section_6">JSON configuration File</h1>
<h1 id="Section_7">Application Programming Interface</h1>
<h2 id="Section_7_1">C# </h2>
<p id="">The C# reference code base provides the following classes to provide access to the Mesh machine configuration:</p>
<dl>
<dl>
<dt>Goedel.Mesh.RegistrationType</dt>
<dt>Goedel.Mesh.RegistrationMachine</dt>
<dt>Goedel.Mesh.RegistrationPersonal</dt>
<dt>Goedel.Mesh.RegistrationDevice</dt>
<dt>Goedel.Mesh.RegistrationApplication</dt>
<dt>Goedel.Portability.Windows</dt>
<dt>Goedel.Portability.OSX</dt>
<dt>Goedel.Portability.Linux</dt>
<dt>Goedel.Mesh.Windows</dt>
<dt/>
<dt/>
</dl>
</dl>
<h1 id="Section_8">IANA Considerations</h1>
<p id="">None</p>
<h1 id="Section_9">Acknowledgements</h1>
<p id="">TBS</p>
<p id=""/>
<h1>References</h1>
<h2 class="references" id="NormativeReferences">Normative References</h2>
</body>
</html>
